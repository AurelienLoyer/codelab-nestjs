== Validation des données

=== Validation des données

* Grâce au pipe `ValidationPipe`, nous allons pouvoir valider les données entrantes
* La validation peut s'activer 
** localement à un endpoint

[source,typescript]
----
@Post()
@UsePipes(ValidationPipe)
getHello(@Body() body: User) { ... }
----

=== Validation des données

* globalement pour toute l'application

[source,typescript]
----
async function bootstrap() {
  const app = await NestFactory.create(ApplicationModule);
  app.useGlobalPipes(new ValidationPipe());
  await app.listen(3000);
}
bootstrap();
----

* localement à un paramètre

[source,typescript]
----
@Post()
getHello(@Body(new ValidationPipe()) body: User) { ... }
----

=== Validation des données

* Le validateur se base sur les modules `class-validator` et `class-transfoermer`
* Il suffit d'ajouter des décorateurs sur vos models

[source,typescript]
----
import { IsString, IsInt } from 'class-validator';

export class User {
  @IsString()
  readonly name: string;

  @IsInt()
  readonly age: number;

  @IsEmail()
  readonly email: string;

  @IsDate()
  readonly birthDate: date;
}
----


=== À vous de jouer !
